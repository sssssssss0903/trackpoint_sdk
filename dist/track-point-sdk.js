!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TrackPointSDK=t():e.TrackPointSDK=t()}(self,(()=>(()=>{"use strict";var e={210:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.getUserEnvironmentInfo=void 0;const o=n(591),r=n(797);function i(){const e=navigator.userAgent;let t="Unknown OS";return/Windows NT 10.0/.test(e)?t="Windows 10":/Windows NT 6.1/.test(e)?t="Windows 7":/Macintosh/.test(e)?t="Mac OS":/Linux/.test(e)?t="Linux":/Android/.test(e)?t="Android":/iPhone|iPad|iPod/.test(e)&&(t="iOS"),{browser_info:e,os_info:t,uid:localStorage.getItem("user_id")||"anonymous_user",timestamp:(new Date).toISOString()}}t.getUserEnvironmentInfo=i,t.register=function(e){const t=i(),n={...e};(0,o.addCommonParams)(t),(0,r.setupErrorHandling)(),(0,r.setupUnhandledRejectionHandling)(),console.log("SDK initialized with config:",n)}},591:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sendEvent=t.addCommonParams=void 0;let n={};t.addCommonParams=function(e){n={...n,...e},console.log("Updated common params:",n)},t.sendEvent=function(e,t,o){if(function(e){return Math.random()<e}(o)){const o={...n,...t};console.log(`Event ${e} uploaded with params:`,o),fetch("http://localhost:3001/api/upload-events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event_name:e,event_data:o})}).then((e=>e.json())).then((e=>{console.log("Event uploaded successfully:",e)})).catch((e=>{console.error("Error uploading event:",e)}))}else console.log(`Event ${e} skipped due to sampling rate.`)}},797:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setupUnhandledRejectionHandling=t.setupErrorHandling=void 0;const o=n(591);t.setupErrorHandling=function(){window.onerror=function(e,t,n,r,i){e instanceof Event&&(e=`Error event: ${e.type}`);const a=i||null,d={message:e,source:t||"Unknown source",lineno:n||0,colno:r||0,error_stack:a?.stack||"",timestamp:(new Date).toISOString()};return(0,o.sendEvent)("javascript_error",d,1),!0}},t.setupUnhandledRejectionHandling=function(){window.addEventListener("unhandledrejection",(e=>{const t={message:e.reason?.message||"Unknown error",stack:e.reason?.stack||"",timestamp:(new Date).toISOString()};(0,o.sendEvent)("unhandled_promise_rejection",t,1)}))}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}var o={};return(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});const t=n(591),r=n(210),i={project_id:"demo",upload_percent:.99,page_id:window.location.href};!function(){const e={...i,project_id:window.sdkProjectId||i.project_id,upload_percent:window.sdkUploadPercent||i.upload_percent};(0,r.register)(e),window.addEventListener("load",(()=>{(0,t.sendEvent)("page_load",{page_url:window.location.href,page_title:document.title,timestamp:(new Date).toISOString()},e.upload_percent)})),document.querySelectorAll("button").forEach((n=>{n.addEventListener("click",(()=>{(0,t.sendEvent)("button_click",{button_id:n.id,button_text:n.innerText||n.value,timestamp:(new Date).toISOString()},e.upload_percent)}))})),document.querySelectorAll("a").forEach((n=>{n.addEventListener("click",(()=>{(0,t.sendEvent)("link_click",{link_href:n.href,link_text:n.innerText,timestamp:(new Date).toISOString()},e.upload_percent)}))})),document.querySelectorAll("input, textarea").forEach((n=>{const o=n;o.addEventListener("input",(()=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout((()=>(()=>{(0,t.sendEvent)("input_field_change",{input_id:o.id,input_value:o.value,timestamp:(new Date).toISOString()},e.upload_percent)})(...r)),200)}})())})),window.addEventListener("scroll",(()=>{(0,t.sendEvent)("page_scroll",{scroll_position:window.scrollY,page_height:document.documentElement.scrollHeight,timestamp:(new Date).toISOString()},e.upload_percent)})),document.querySelectorAll("form").forEach((n=>{n.addEventListener("submit",(o=>{o.preventDefault(),(0,t.sendEvent)("form_submit",{form_id:n.id,form_action:n.action,timestamp:(new Date).toISOString()},e.upload_percent),setTimeout((()=>{n.submit()}),500)}))}))}()})(),o})()));
//# sourceMappingURL=track-point-sdk.js.map